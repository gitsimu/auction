<!DOCTYPE html>
<html>
<head>
	<title>Fresh Auction Discord OAuth2</title>
	<style>
		body {
			color: #fff;
    	background: rgba(34, 37, 43, 1);
		}
	</style>
</head>
<body>
	<div id="info">
		Loading...
	</div>
	<!-- <a id="login" style="display: none;" href="your oauth2 url here">Identify Yourself</a> -->
	<script>
		window.onload = () => {
			const fragment = new URLSearchParams(window.location.hash.slice(1));
			if (fragment.has("access_token")) {
				const accessToken = fragment.get("access_token");
				const tokenType = fragment.get("token_type");

				setCookie('discord_access_token', accessToken, 1)
				setCookie('discord_token_type', tokenType, 1)

				location.href = "/main"
			} else {
				alert('인증 정보가 올바르지 않습니다.\n다시 한 번 시도해주세요.')
				location.href = "/"
			}
		}

		function setCookie(cookie_name, value, days) {
			var exdate = new Date();
			exdate.setDate(exdate.getDate() + days);			

			var cookie_value = escape(value) + ((days == null) ? '' : '; expires=' + exdate.toUTCString());
			document.cookie = cookie_name + '=' + cookie_value;
		}
	</script>
</body>
</html>